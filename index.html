<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>MechCheck v0.1</title>
		<script type="text/javascript" src="/scripts/knockout-2.2.0.debug.js"></script>
		<script type="text/javascript" src="/scripts/jquery-1.8.3.js"></script>
		<script type="text/javascript" src="/scripts/jquery-ui-1.9.2.custom.js"></script>
		<script type="text/javascript" src="/scripts/knockout-jquery-ui-widget.js"></script>
		<script type="text/javascript" src="/js/items.js"></script>
		<script type="text/javascript" src="/js/core.js"></script>
		<script type="text/javascript" src="/js/mech.js"></script>
		<script type="text/javascript" src="/js/enums.js"></script>
		<link href="site.css" rel="stylesheet" type="text/css"></link>
		<link href="/css/overcast/jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css"><link>
 	</head>
	<body>
		<script type="text/javascript">
			$(document).ready(function() {

				loadMechlabItems(function(items){
					mechlab_items = items;
					window.testVM = new mechlab.coreVM();
			  		ko.applyBindings(window.testVM, $('div#primary')[0]);
				});
			});
		</script>
		<div id="primary">
			<h2>MechCheck (0.1)</h2>
			<div>
				<span>Select mech:</span>
				<select id="chassisSelect" data-bind="
					options: items.mechs, 
					optionsText: function(option){ return option.name.toUpperCase(); }, 
					value: selectedMech">
				</select>
				<button data-bind="click: selectMech">Go</button>
			</div>
			<hr />

			<div data-bind="with: activeMech">
				<h2>Configuring <span data-bind="text: name" /></h2>
				
				<!-- <div class="loadout-area">
					<p>Left Arm:</p>
					<ul data-bind="foreach: leftArmSlots, jqueryui : { widget: 'droppable', options: { accept: leftArmAccept, activeClass: 'dropHighlight', drop: leftArmTarget } }">
						<li>
							<span data-bind="text: $data"></span>
						</li>
					</ul>	
				</div> -->
				<div class="loadout-area">
					<div data-bind="template: { name: 'componentList', data: leftArm }"></div>
					<div data-bind="template: { name: 'componentList', data: centerTorso }"></div>

				</div>
				<!-- <div class="loadout-area">
					<p>Center Torso:</p>
					<ul data-bind="foreach: centerTorsoSlots, jqueryui : { widget: 'droppable', options: { accept: centerTorsoAccept, activeClass: 'dropHighlight', drop: centerTorsoTarget } }">
						<li>
							<span data-bind="text: $data"></span>
						</li>
					</ul>	
				</div> -->

				

				<div id="itemTabs" data-bind="jqueryui: { widget: 'tabs' }" style="width:500px;float:left;">
					<ul>
						<li><a href="#fragment-1">Weapons</a></li>
						<li><a href="#fragment-2">Ammo</a></li>
						<li><a href="#fragment-3">Equipment</a></li>
					</ul>
					<div id="fragment-1">
						<ul data-bind="foreach: $parent.items.weapons">
							<li data-bind="jqueryui: { widget: 'draggable', options: { revert: true, distance: 20, helper: 'clone', revertDuration: 0 } }">
								<span data-bind="text: name"></span>
							</li>
						</ul>
					</div>
					<div id="fragment-2">
						<ul data-bind="foreach: $parent.items.ammoTypes">
							<li data-bind="jqueryui: { widget: 'draggable', options: { revert: true, distance: 20, helper: 'clone', revertDuration: 0 } }">
								<span data-bind="text: name"></span>
							</li>
						</ul>
					</div>
					<div id="fragment-3">
						<ul data-bind="foreach: $parent.items.equipment">
							<li data-bind="jqueryui: { widget: 'draggable', options: { revert: true, distance: 20, helper: 'clone', revertDuration: 0 } }">
								<span data-bind="text: name"></span>
							</li>
						</ul>
					</div>
				</div>
				
				<div style="clear:both;"></div>

				<div>
					<span>Tons:</span>
					<span data-bind="text: maxTonnage"></span>
					<br />
					<span>Current Tons:</span>
					<span data-bind="text: tonnage"></span>
					<br />
					<!-- <span>Critical Slots:</span>
					<span data-bind="text: criticalSlotsOpen"></span>	 -->				
				</div>
				<div>
					<span>Engine:</span>
					<select data-bind="options: $parent.items.engines, optionsText: 'name', value: engine">
					</select>
				</div>

				<div class="area">
					<h3>Upgrades</h3>
					<table>
						<tbody>
							<tr>
								<td>
									<label>Internal Structure</label>
								</td>
								<td>
									<select id="structureSelect" data-bind="value: structure">
										<option value="standard">Standard</option>
										<option value="endosteel">Endo Steel</option>
									</select>
								</td>
							</tr>
							<tr>
								<td>
									<label>Heat Sinks</label>
								</td>
								<td>
									<select id="heatSinkSelect" data-bind="value: heatSinks">
										<option value="single">Single</option>
										<option value="double">Double</option>
									</select>
								</td>
							</tr>
							<tr>
								<td>
									<label>Armor Type</label>
								</td>
								<td>
									<select id="armorSelect" data-bind="value: armor">
										<option value="standard">Standard</option>
										<option value="ferroFibrous">Ferro-Fibrous</option>
									</select>
								</td>
							</tr>
							<tr>
								<td>
									<label>Artemis</label>
								</td>
								<td>
									<select id="artemisSelect" data-bind="value: artemis">
										<option value="none">None</option>
										<option value="equipped">Equipped</option>
									</select>
								</td>
							</tr>
						</tbody>
					</table>
				</div>

				<div class="area">
					<h3>Armor</h3>
					<table>
						<tbody>
							<tr>
								<td>Head</td>
								<td>
									<input data-bind="value: armorHead" />
								</td>
							</tr>
							<tr>
								<td>Total</td>
								<td><span data-bind="text: overallArmorValue" /></td>
							</tr>
						</tbody>
					</table>
				</div>

				<script type='text\html' id="componentList">
					<div class="loadout">
						<p>
							<span id="namespan" data-bind="text: name"></span>:
							<span id="hardpointDisplayTextSpan" data-bind="text: hardpointDisplayText" />
						</p>
						<ul data-bind="foreach: displaySlots, jqueryui : { widget: 'droppable', options: { accept: accept, activeClass: 'dropHighlight', drop: drop } }">
							<li>
								<span data-bind="text: $data"></span>
							</li>
						</ul>	
					</div>
				</script>
			</div>
		</div>
	</body>
</html>